{% extends "threedi_verification/base.html" %}
{% load staticfiles %}

{% block main-column %}
  <h1>Crashes</h1>
  <table class="table">
    <thead>
      <tr>
        <th>Test case</th>
        <th>Duration</th>
        <th>Log summary</th>
        <th>Log</th>
      </tr>
    </thead>

    <tbody>
      {% for test_run in view.crashed_test_runs %}
        <tr>
          <td>
            {{ test_run.report.short_title }}
          </td>
          <td>
            {{ test_run.duration|floatformat }}
          </td>
          <td>
            {{ test_run.report.log_summary|linebreaksbr }}
          </td>
          <td>
            <a href="{% url 'threedi_verification.log' pk=test_run.pk %}">
              <span class="glyphicon glyphicon-list-alt"
                    title="Logfile"></span>
            </a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <h1>Test results</h1>
  <table class="table">
    <thead>
      <tr>
        <th>Test case</th>
        <th>Duration</th>
        <th>Result</th>
        <th>Log</th>
      </tr>
    </thead>

    <tbody>
      {% for test_run in view.completed_test_runs %}
        <tr>
          <td>
            {{ test_run.report.short_title }}
          </td>
          <td>
            {{ test_run.duration|floatformat }}
          </td>
          <td>

            <a href="{% url 'threedi_verification.test_run' pk=test_run.pk %}">
              <div class="progress">
                <div class="progress-bar progress-bar-success"
                     style="width: {{ test_run.progress_bar_percentage_right }}%;">
                </div>
                <div class="progress-bar progress-bar-danger"
                     style="width: {{ test_run.progress_bar_percentage_wrong }}%;">
                </div>
              </div>
            </a>

          </td>
          <td>
            <a href="{% url 'threedi_verification.log' pk=test_run.pk %}">
              <span class="glyphicon glyphicon-list-alt"
                    title="Logfile"></span>
            </a>
          </td>
        </tr>
      {% endfor %}

      {% for test_run in view.uncompleted_test_runs %}
        <tr>
          <td>
            {{ test_run.report.short_title }}
          </td>
          <td colspan="3">
            This test has not run.
          </td>
        </tr>
      {% endfor %}
    </tbody>

  </table>

{% endblock %}
